"use strict";function previewImage(a){if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){$(".image-preview img").attr("src",a.target.result)},b.readAsDataURL(a.files[0])}}Parse.initialize("B1NGRVxybXDwN8s7HpKIunnzvKe4mW6bSDNi0hp6","qMl0DxT4FHssKEodsKAGTx5V3p5sDO5m3dk8wdGD"),$(".make-new-post").click(function(){$(".full-page").addClass("overlay"),$(".new-post").show(),$(".remove-new-post").show(),setTimeout(function(){$(".new-post").css({opacity:1}),$(".remove-new-post").css({opacity:1}),$(".overlay").css({opacity:1})},150)}),$(".remove-new-post").click(function(){$(".new-post").css({opacity:0}),$(".remove-new-post").css({opacity:0}),$(".overlay").css({opacity:0}),$(".full-page").css({opacity:1}),setTimeout(function(){$(".remove-new-post").hide(),$(".new-post").hide(),$(".full-page").removeClass("overlay")},410)}),$(".image-upload-input").change(function(){$(".preview-image-button").show()}),$(".preview-image-button").click(function(){var a=$(".image-upload-input")[0];previewImage(a),$(".uploader-container").hide(),$(".preview-image-button").hide(),$(".image-preview").show(),$(".reset-image-button").show()}),$(".reset-image-button").click(function(){$(".preview-image-button").hide(),$(".reset-image-button").hide(),$(".image-preview").hide(),$(".uploader-container").show()}),$(".post-button").click(function(){var a=$(".image-upload-input")[0];if(a.files.length>0){var b=a.files[0],c="photo.jpg",d=new Parse.File(c,b);d.save().done(function(){console.log("parse is",d),console.log("parse.url is",d.url());var a=new Post;a.set({beerName:$(".beer-name").val(),breweryName:$(".brewery-name").val(),comment:$(".image-upload-comment").val(),rating:rated,beerImage:d.url()}),a.save().done(function(){console.log("success")}),app.collection.add(a)})}});var rated;$(".rating span").click(function(){for(var a=5;a>=0;a--)$(".rate-"+a).removeClass("stars");rated=this.className,rated="rate-1"==rated?1:"rate-2"==rated?2:"rate-3"==rated?3:"rate-4"==rated?4:"rate-5"==rated?5:0;for(var a=rated;a>=0;a--)$(".rate-"+a).addClass("stars")});var Post=Parse.Object.extend({className:"post"}),FullPostCollection=Parse.Collection.extend({model:Post}),details,ThumbnailView=Parse.View.extend({template:_.template($(".thumbnail-template").text()),className:"thumbnail-container",events:{"click .beer-thumbnail":"details"},initialize:function(){$(".gallery-container").append(this.el),this.render();var a=this.model.get("beerImage");this.$el.find("img").attr("src",a);for(var b=this.model.get("rating"),c=0;b>=c;c++)this.$el.find(".thumb-rate-"+c).addClass("stars")},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},details:function(){details=new DetailView({model:this.model}),$(".detail-container").show(),$(".full-page").addClass("overlay"),$(".overlay").css({opacity:1})}}),DetailView=Parse.View.extend({template:_.template($(".detail-template").text()),className:"detail-contents",initialize:function(){$(".detail-container").append(this.el),this.render();var a=this.model.get("beerImage");this.$el.find("img").attr("src",a);for(var b=this.model.get("rating"),c=0;b>=c;c++)this.$el.find(".detail-rate-"+c).addClass("stars");$(".remove-detail-view").click(function(){$(".full-page").removeClass("overlay"),$(".full-page").css({opacity:1}),$(".overlay").css({opacity:0}),$(".detail-container").hide(),details.remove()})},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)}}),AppView=Parse.View.extend({initialize:function(){this.collection=new FullPostCollection,this.collection.on("add",this.addPost),this.collection.fetch({add:!0})},addPost:function(a){new ThumbnailView({model:a})}}),app=new AppView;